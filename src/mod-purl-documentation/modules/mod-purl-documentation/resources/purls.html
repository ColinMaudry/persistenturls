<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- 

purls.html - Provides a Web UI for the administration of batch PURLs.

version 1.0, 30 August 2007
David Wood (david at http://zepheira.com/)

=========================================================================

Copyright (C) 2007 OCLC (http://oclc.org)
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

=========================================================================

MAINTENANCE HINTS:
TODO: Update
1)  There are six HTML forms on this page: 'naviform' is used to choose
at most ONE of the other forms to show at any moment.  Showing one of four
others (create, modify, search, delete or advancedcreate) will hide the others.
2)  Any of the actionable forms (create, modify, search, delete or advancedcreate)
may be directly accessed by appending its id as a URL fragment (e.g. purl.html#create). 
3)  HTML forms are submitted via the functions createSubmit(), modifySubmit(),
searchSubmit() and deleteSubmit() via AJAX (all defined on this page).  The
remainder of the Javascript functions are in external Javascript files.
Importantly, look for the callback function onResponse() in utilpurl.js, which
handles results from the server in response to form submissions.

-->

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link type="text/css" rel="stylesheet" href="style.css" />

	<title>Batch PURL Administration</title>
<script type="text/javascript" src="javascripts/utilajax.js">
</script>
<script type="text/javascript" src="javascripts/ajaxCaller.js">
</script><!-- http://ajaxify.com/run/Lib/js/ -->

<script type="text/javascript" src="javascripts/xmlsax.js">
</script>
<script type="text/javascript" src="javascripts/SaxEventHandler.js">
</script><!-- http://xmljs.sourceforge.net -->

<script type="text/javascript" src="javascripts/utilpurl.js">
</script>
<script type="text/javascript">
//<![CDATA[

	var debugThisPage = false;

	// NB: This array contains the names of each element that represents a label for an HTML form item.  If you add a new form item and want it highlighted upon a "bad parameter" error, you MUST add it's id to this array.
	// TODO: Review
	var labelElements = ["c_file_label", "m_file_label", "d_file_label"];

	// Send a Create command via HTTP POST.
	function createSubmit() {
		var my_file = $('c_file').value;
		if ( my_file == "" | my_file == null ) {
			alert("You must provide a file to identify the PURLs you wish to create.  Please enter a file.");
		} else {
			signalLoadingResults();
			urlVars = {}
			bodyVars = {
				file: my_file
			}
			ajaxCaller.postVars("/admin/purls/", bodyVars, urlVars, onResponse, false, "Create");
		}
		clearErrorIndications();
		return false;
	}

	// Send a Modify command via HTTP PUT.
	function modifySubmit() {
		var my_file = $('m_file').value;
		if ( my_file == "" | my_file == null ) {
			alert("You must provide a file to identify the PURLs you wish to modify.  Please enter a file.");
		} else {
			signalLoadingResults();
			urlVars = {
			}
			bodyType = "text/html";
			body = "";
			parameters = {
				file: my_file
			};
				// TODO: What is the URL to admin a PURL?  /admin/purl/<path>/<name>?  /<path>/<name>?
			ajaxCaller.putBody("/admin/purls/", parameters.urlVars, onResponse, false, "Modify", parameters.bodyType, parameters.body);
		}
		clearErrorIndications();
		return false;
	}

	// Send a Delete command via HTTP DELETE.
	function deleteSubmit() {
		var my_file = $('d_file').value;
		if ( my_file == "" | my_file == null ) {
			alert("You must provide a file to identify the PURLs you wish to delete.  Please enter a file.");
		} else {
			signalLoadingResults();
			bodyVars =  {
				file: my_file
			}
			ajaxCaller.deleteIt("/admin/purls/", bodyVars, onResponse, false, "Delete");
		}
		clearErrorIndications();
		return false;
	}

//]]>
</script>
</head>

<body onload="load()">
	<div id="header">
		<h1>Batch PURL Administration</h1>

		<ul id="tabmenu">
			<li><a class="inactive" href="index.html">Home</a></li>
			<li><a class="inactive" href="purl.html">PURLs</a></li>
			<li><a class="active" href="purls.html">Batches</a></li>
			<li><a class="inactive" href="user.html">Users</a></li>
			<li><a class="inactive" href="group.html">Groups</a></li>
			<li><a class="inactive" href="domain.html">Domains</a></li>
		</ul>
	</div>

	<div id="content">
		<table class="navtable" summary="purl interface" width="100%">
			<tr valign="top">
				<td class="navtable_action" width="35%">
					<div id="navigation">
						<form name="naviform" id="naviform">
							<fieldset>
								<legend>1) Choose an action to take on PURLs</legend>

								<div class="instructions">
									Batch PURL administration options.
								</div><select name="naviselect" onchange="showAction()">
									<option value="">
										--- Select your action ---
									</option>

									<option value="create">
										Create new PURLs
									</option>

									<option value="modify">
										Modify existing PURLs
									</option>

									<option value="delete">
										Delete PURLs
									</option>
								</select>
							</fieldset>
						</form><img src="http://purlz.org/images/purl-batch.png" alt="some PURLs" />
					</div>
				</td>

				<td class="navtable_form">
					<div id="create" style="display: none;">
						<form action="#" name="createForm" onsubmit="return createSubmit()" id="createForm">
							<fieldset>
								<legend>2) Register a batch of PURLs</legend>

								<div class="instructions">
									Upload an <a href="PurlXMLhelp.html">XML file</a> containing PURLs to create.
								</div>

								<table class="actiontable" summary="action table">
									<tbody>
										<tr>
											<td class="property" id="c_file_label">XML file:</td>

											<td class="value"><input id="c_file" name="c_file" type="file" size="40" accept="text/xml,application/xml"/></td>
										</tr>
									</tbody>
								</table><input value="Submit" type="submit" />
							</fieldset>
						</form>
					</div>

					<div id="modify" style="display: none;">
						<form action="#" name="modifyForm" onsubmit="return modifySubmit()" id="modifyForm">
							<fieldset>
								<legend>2) Modify a batch of PURLs</legend>

								<div class="instructions">
									Upload an <a href="PurlXMLhelp.html">XML file</a> containing PURLs to modify.
								</div>

								<table class="actiontable" summary="action table">
									<tbody>
										<tr>
											<td class="property" id="m_file_label">XML file:</td>

											<td class="value"><input id="m_file" name="m_file" type="file" size="40" accept="text/xml,application/xml"/></td>
										</tr>
									</tbody>
								</table><input value="Submit" type="submit" />
							</fieldset>
						</form>
					</div>

					<div id="delete" style="display: none;">
						<form action="#" name="deleteForm" onsubmit="return checkDeleteSubmit('PURLs', null)" id="deleteForm">
							<fieldset>
								<legend>2) Delete a batch of PURLs</legend>

								<div class="instructions">
									Upload an <a href="PurlXMLhelp.html">XML file</a> containing PURLs to delete. You will be prompted for confirmation to complete this action.
								</div>

								<table class="actiontable" summary="action table">
									<tbody>
										<tr>
											<td class="property" id="d_file_label">XML file:</td>

											<td class="value"><input id="d_file" name="d_file" type="file" size="40" accept="text/xml,application/xml"/></td>
										</tr>
									</tbody>
								</table><input value="Submit" type="submit" />
							</fieldset>
						</form>
					</div>

				</td>
			</tr>
		</table>
	</div><!-- content -->

	<div id="results" class="noresults"></div>

	<div id="footer">
		<a href="http://www.oclc.org/"><img align="left" src="http://www.oclc.org/common/images/logos/oclclogo.jpg" alt="oclc" /></a><br />
		<a href="http://zepheira.com/"><img align="right" src="http://purlz.org/images/zepheiralogo.png" alt="zepheira" /></a>
	</div>
</body>
</html>
